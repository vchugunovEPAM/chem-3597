import java.awt.*;
import java.io.*;
import java.util.Arrays;

public class Main
{

    private static OutputStream out;

    static
    {
        try
        {
            out = new FileOutputStream("test.ttf");
        }
        catch (FileNotFoundException e)
        {
            System.out.println("Exception in file opening");
            e.printStackTrace();
        }
    }

    public static void main(String[] args) throws IOException, FontFormatException
    {
        System.out.println("Building font file..");
        int[] data = {0, 1, 0, 0, 0, 13, 0, 128, 0, 3, 0, 80, 70, 70, 84, 77, 209, 46, 153, 111, 0, 0, 6, 96, 0, 0, 0, 28, 71, 68, 69, 70, 0, 41, 0, 11, 0, 0, 6, 64, 0, 0, 0, 30, 79, 83, 47, 50, 99, 115, 95, 50, 0, 0, 1, 88, 0, 0, 0, 96, 99, 109, 97, 112, 0, 53, 7, 24, 0, 0, 1, 204, 0, 0, 1, 82, 103, 97, 115, 112, 255, 255, 0, 3, 0, 0, 6, 56, 0, 0, 0, 8, 103, 108, 121, 102, 24, 54, 74, 39, 0, 0, 3, 44, 0, 0, 0, 44, 104, 101, 97, 100, 4, 69, 118, 79, 0, 0, 0, 220, 0, 0, 0, 54, 104, 104, 101, 97, 1, 177, 1, 250, 0, 0, 1, 20, 0, 0, 0, 36, 104, 109, 116, 120, 5, 65, 0, 0, 0, 0, 1, 184, 0, 0, 0, 20, 108, 111, 99, 97, 0, 44, 0, 66, 0, 0, 3, 32, 0, 0, 0, 12, 109, 97, 120, 112, 0, 73, 0, 11, 0, 0, 1, 56, 0, 0, 0, 32, 110, 97, 109, 101, 80, 69, 134, 156, 0, 0, 3, 88, 0, 0, 2, 178, 112, 111, 115, 116, 0, 11, 0, 38, 0, 0, 6, 12, 0, 0, 0, 44, 0, 1, 0, 0, 0, 1, 0, 0, 94, 68, 221, 72, 95, 15, 60, 245, 0, 11, 3, 232, 0, 0, 0, 0, 209, 187, 153, 87, 0, 0, 0, 0, 209, 187, 153, 87, 0, 0, 0, 0, 1, 176, 2, 188, 0, 0, 0, 8, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 244, 0, 0, 0, 0, 1, 176, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 0, 1, 0, 0, 0, 5, 0, 8, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 1, 0, 1, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 3, 1, 14, 1, 244, 0, 5, 0, 0, 2, 138, 2, 187, 0, 0, 0, 140, 2, 138, 2, 187, 0, 0, 1, 223, 0, 49, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 88, 88, 88, 88, 0, 64, 0, 32, 0, 65, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 1, 1, 216, 0, 0, 0, 0, 0, 0, 1, 77, 0, 0, 1, 244, 0, 0, 0, 40, 0, 0, 0, 0, 0, 3, 0, 0, 0, 3, 0, 0, 0, 28, 0, 1, 0, 0, 0, 0, 0, 76, 0, 3, 0, 1, 0, 0, 0, 28, 0, 4, 0, 48, 0, 0, 0, 8, 0, 8, 0, 2, 0, 0, 0, 0, 0, 32, 0, 65, 255, 255, 0, 0, 0, 0, 0, 32, 0, 65, 255, 255, 0, 0, 255, 227, 255, 195, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 6, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 22, 0, 22, 0, 22, 0, 22, 0, 22, 0, 2, 0, 0, 0, 0, 1, 176, 2, 188, 0, 3, 0, 7, 0, 0, 25, 1, 33, 17, 1, 17, 33, 17, 1, 176, 254, 130, 1, 76, 2, 188, 253, 68, 2, 188, 253, 118, 2, 88, 253, 168, 0, 0, 0, 0, 0, 30, 1, 110, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 4, 0, 1, 0, 0, 0, 0, 0, 1, 0, 8, 0, 24, 0, 1, 0, 0, 0, 0, 0, 2, 0, 6, 0, 47, 0, 1, 0, 0, 0, 0, 0, 3, 0, 17, 0, 90, 0, 1, 0, 0, 0, 0, 0, 4, 0, 15, 0, 140, 0, 1, 0, 0, 0, 0, 0, 5, 0, 13, 0, 184, 0, 1, 0, 0, 0, 0, 0, 6, 0, 13, 0, 226, 0, 1, 0, 0, 0, 0, 0, 7, 0, 1, 0, 244, 0, 1, 0, 0, 0, 0, 0, 8, 0, 1, 0, 250, 0, 1, 0, 0, 0, 0, 0, 9, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 10, 0, 1, 1, 6, 0, 1, 0, 0, 0, 0, 0, 11, 0, 1, 1, 12, 0, 1, 0, 0, 0, 0, 0, 12, 0, 1, 1, 18, 0, 1, 0, 0, 0, 0, 0, 16, 0, 8, 1, 38, 0, 1, 0, 0, 0, 0, 0, 17, 0, 6, 1, 61, 0, 3, 0, 1, 4, 9, 0, 0, 0, 2, 0, 0, 0, 3, 0, 1, 4, 9, 0, 1, 0, 16, 0, 6, 0, 3, 0, 1, 4, 9, 0, 2, 0, 12, 0, 33, 0, 3, 0, 1, 4, 9, 0, 3, 0, 34, 0, 54, 0, 3, 0, 1, 4, 9, 0, 4, 0, 30, 0, 108, 0, 3, 0, 1, 4, 9, 0, 5, 0, 26, 0, 156, 0, 3, 0, 1, 4, 9, 0, 6, 0, 26, 0, 198, 0, 3, 0, 1, 4, 9, 0, 7, 0, 2, 0, 240, 0, 3, 0, 1, 4, 9, 0, 8, 0, 2, 0, 246, 0, 3, 0, 1, 4, 9, 0, 9, 0, 2, 0, 252, 0, 3, 0, 1, 4, 9, 0, 10, 0, 2, 1, 2, 0, 3, 0, 1, 4, 9, 0, 11, 0, 2, 1, 8, 0, 3, 0, 1, 4, 9, 0, 12, 0, 2, 1, 14, 0, 3, 0, 1, 4, 9, 0, 16, 0, 16, 1, 20, 0, 3, 0, 1, 4, 9, 0, 17, 0, 12, 1, 47, 0, 32, 0, 0, 32, 0, 0, 77, 0, 121, 0, 32, 0, 70, 0, 111, 0, 110, 0, 116, 0, 32, 0, 0, 77, 121, 32, 70, 111, 110, 116, 32, 0, 0, 110, 0, 111, 0, 114, 0, 109, 0, 97, 0, 108, 0, 0, 110, 111, 114, 109, 97, 108, 0, 0, 32, 0, 58, 0, 77, 0, 121, 0, 32, 0, 70, 0, 111, 0, 110, 0, 116, 0, 32, 0, 32, 0, 110, 0, 111, 0, 114, 0, 109, 0, 97, 0, 108, 0, 0, 32, 58, 77, 121, 32, 70, 111, 110, 116, 32, 32, 110, 111, 114, 109, 97, 108, 0, 0, 77, 0, 121, 0, 32, 0, 70, 0, 111, 0, 110, 0, 116, 0, 32, 0, 32, 0, 110, 0, 111, 0, 114, 0, 109, 0, 97, 0, 108, 0, 0, 77, 121, 32, 70, 111, 110, 116, 32, 32, 110, 111, 114, 109, 97, 108, 0, 0, 86, 0, 101, 0, 114, 0, 115, 0, 105, 0, 111, 0, 110, 0, 32, 0, 48, 0, 46, 0, 48, 0, 48, 0, 49, 0, 0, 86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 48, 48, 49, 0, 0, 77, 0, 121, 0, 70, 0, 111, 0, 110, 0, 116, 0, 45, 0, 110, 0, 111, 0, 114, 0, 109, 0, 97, 0, 108, 0, 0, 77, 121, 70, 111, 110, 116, 45, 110, 111, 114, 109, 97, 108, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 32, 0, 0, 77, 0, 121, 0, 32, 0, 70, 0, 111, 0, 110, 0, 116, 0, 32, 0, 0, 77, 121, 32, 70, 111, 110, 116, 32, 0, 0, 110, 0, 111, 0, 114, 0, 109, 0, 97, 0, 108, 0, 0, 110, 111, 114, 109, 97, 108, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 1, 0, 2, 0, 3, 0, 36, 0, 0, 0, 1, 255, 255, 0, 2, 0, 1, 0, 0, 0, 12, 0, 0, 0, 22, 0, 0, 0, 2, 0, 1, 0, 3, 0, 4, 0, 1, 0, 4, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 209, 46, 153, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
        Arrays.stream(data).forEach(Main::write);
        out.close();
        System.out.println("Raw font file write complete\n");

        System.out.println("Creating font instance from file");
        try
        {
            Font.createFont(Font.TRUETYPE_FONT, new File("test.ttf")).deriveFont(Font.TRUETYPE_FONT, 20F);
        } catch (Exception e)
        {
            System.out.println("Failed to create font instance.");
            if (!(e instanceof NullPointerException))
            {
                return;
            }

            StackTraceElement location = e.getStackTrace()[0];
            if (location.getClassName().equals("sun.awt.FontConfiguration")
                && location.getMethodName().equals("getVersion")
                && location.getLineNumber() == 1264)
            {
                System.out.println("\n\nCHEM-3597 is reproduced\n\n");
            }
        } finally
        {
            System.out.println("Test finished");
        }
    }

    private static void write(int i) {
        try
        {
            out.write(i);
        }
        catch (IOException e)
        {
            System.out.println("Exception in .write()");
            e.printStackTrace();
        }
    }
}